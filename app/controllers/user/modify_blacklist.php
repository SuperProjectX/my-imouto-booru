<?php$added_tags = !empty(Request::$params->add) ? Request::$params->add : array();$removed_tags = !empty(Request::$params->remove) ? Request::$params->remove : array();$tags = User::$current->blacklisted_tags_array();foreach ($added_tags as $tag)   !in_array($tag, $tags) && $tags[] = $tag;$tags = array_diff($tags, $removed_tags);if (User::$current->user_blacklisted_tag->update_attribute('tags', implode("\r\n", $tags)))  respond_to_success("Tag blacklist updated", "#home", array('api' => array('result' => User::$current->blacklisted_tags_array())));else  respond_to_error(User::$current, "#edit");?>